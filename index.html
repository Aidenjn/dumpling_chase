<!DOCTYPE html>
<html>
<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="node_modules/paper/dist/paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<script type="text/paperscript" canvas="myCanvas">

// ****** Begin JavaScript ****** 

function cellConstructor(r, c) {
    var cell = {
        row:    r,
        column: c,
        links:  {},
        type:   "Normal",
        north:  false,
        east:   false,
        south:  false,
        west:   false,
        
        // Function: link
        // Parameters: Cell to link, bidirectional option
        // Description: Links the cell to another
        link: function(c, bidi) {
            this.links[c] = true;
            if (bidi === true)
                c.link(self, false);
        },
        // Function: unlink
        // Parameters: Cell to unlink, bidirectional option
        // Description: unlinks the cell from another
        unlink: function(c, bidi) {
            delete this.links[c];
            if (bidi === true)
                c.link(self, false);
        },
        // Function: getLinks
        // Parameters: none
        // Description: Returns a list of linked cells
        getLinks: function() {
            return Object.keys(this.links);
        },
        // Function: hasLink
        // Parameters: Cell
        // Description: Returns weither the cell has a link to the onther cell
        hasLink: function(c) {
            return links(cell) === true;
        },
        // Function: getNeighbors
        // Parameters: none
        // Description: Returns a list of neighboring cells
        getNeighbors: function() {
            list = [];
            if (this.north)
                list.push(this.north);
            if (this.east)
                list.push(this.east);
            if (this.south)
                list.push(this.south);
            if (this.west)
                list.push(this.west);
            return list;
        }
    };
}



function buildCell(xCoord, yCoord) {
    var cell = {
        x:      xCoord,
        y:      yCoord,
        
    };
    
    return cell;
}

// Initialize matrix
function initMatrix(cellAmount) {
    var matrix = new Array(cellAmount);
    for (var i = 0; i < matrix.length; i++) {
        matrix[i] = new Array(cellAmount);
    }
    return matrix;
}

// Fill the matrix
function fillMatrix(m) {
    for (var i = 0; i < m.length; i++) {
        for (var j = 0; j < m[i].length; j++) {
            m[i][j] = buildCell(i, j);
        }
    }
}

function drawCell(c, size, xCoord, yCoord) {
    console.log(c.type);
    console.log(c.x);
    console.log(c.y);
    
    var path = new Path();
    path.strokeColor = 'black';
    var start = new Point(xCoord, yCoord);
    path.moveTo(start);
    path.lineTo(start + [size, 0]);
    path.strokeColor = 'red';
    path.lineTo(start + [size, -size]);
    path.strokeColor = 'green';
    path.lineTo(start + [0, -size]);
    path.strokeColor = 'blue';
    path.lineTo(start + [0, 0]);
}


// Draw the matrix
function drawMatrix(m, size, xCoord, yCoord) {
    cellSize = size / m.length;
    console.log("cellsize: " + cellSize);
    for (var i = 0; i < m.length; i++) {
        for (var j = 0; j < m[i].length; j++) {
            drawCell(m[i][j], cellSize, xCoord + (cellSize * i), yCoord + (cellSize * j))
        }
    }
}

grid = initMatrix(10);
fillMatrix(grid);
drawMatrix(grid, 200, 20, 20);


// ****** End JavaScript ****** 

</script>
</head>
<body>
<canvas id="myCanvas" resize></canvas>
<p>Heyo</p>
</body>
</html>
